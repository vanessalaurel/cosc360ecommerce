<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-Commerce HomePage</title>
    <link rel="stylesheet" href="styles.css" />
    <script
      src="https://kit.fontawesome.com/a076d05399.js"
      crossorigin="anonymous"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        fetchUserProducts();
      });

      function fetchUserProducts() {
        fetch("backend/getUserProduct.php")
          .then((response) => response.json())
          .then((data) => {
            if (data.error) {
              // Handle error (e.g., redirect to login)
              window.location.href = "login.html";
              return;
            }

            displayProducts(data.products);
          })
          .catch((error) => {
            console.error("Error fetching products:", error);
          });
      }

      function displayProducts(products) {
        const productsContainer = document.getElementById("products-container");

        // Clear existing content
        productsContainer.innerHTML = "";

        if (products.length === 0) {
          // Show message if no products
          productsContainer.innerHTML = `
            <div style="width: 100%; text-align: center; padding: 40px;">
              <p style="font-size: 18px;">You haven't listed any products yet.</p>
              <a href="Listingpage.html" style="
                display: inline-block;
                margin-top: 20px;
                background-color: #5a2d0c; 
                color: white; 
                padding: 15px 30px; 
                border-radius: 10px; 
                text-decoration: none;
                font-weight: bold;
              ">
                List Your First Product
              </a>
            </div>
          `;
          return;
        }

        // Add products
        products.forEach((product) => {
          const productCard = document.createElement("div");
          productCard.className = "product-card";

          productCard.innerHTML = `
            <div class="product-image">
              <img
                src="${product.image_path}"
                alt="${product.product_name}"
                class="product-image-img"
              />
              <div class="add-to-cart">Edit Product</div>
            </div>
            <div class="product-info">
              <h3 class="product-title">${product.product_name}</h3>
              <p class="product-price">
                $${parseFloat(product.price).toFixed(2)}
              </p>
              <p class="product-category">Category: ${product.category}</p>
              <p class="product-quantity">Quantity: ${product.quantity}</p>
            </div>
          `;

          productsContainer.appendChild(productCard);
        });
      }
    </script>
  </head>
  <header>
    <div class="logo"><img src="Source/Exclusive.png" alt="Logo" /></div>
    <nav>
      <a href="#">Home</a>
      <a href="#">Contact</a>
      <a href="#">About</a>
      <a href="#" class="active">Sign Up</a>
    </nav>
    <div class="search-cart">
      <input type="text" placeholder="What are you looking for?" />
      <button><img src="Source/Vector.png" alt="" /></button>
      <button>
        <img src="Source/Frame 551.png" style="position: relative; top: 7px" />
      </button>
      <button>
        <img src="Source/user.png" style="position: relative; top: 7px" />
      </button>
    </div>
  </header>
  <body>
    <section class="best-sellers">
      <div style="display: flex">
        <h2 style="font-size: 36px; color: black; margin-left: 40px">
          My Products
        </h2>
        <div style="margin-top: 28px; margin-left: auto; margin-right: 40px">
          <a
            href="Listingpage.html"
            style="
              background-color: #5a2d0c;
              color: white;
              padding: 10px 20px;
              border-radius: 10px;
              text-decoration: none;
              font-weight: bold;
            "
          >
            + Add New Product
          </a>
          <button style="border-radius: 90px; width: 46px; height: 46px">
            <
          </button>
          <button style="border-radius: 90px; width: 46px; height: 46px">
            >
          </button>
        </div>
      </div>

      <div class="products">
        <div class="product-card">
          <div class="product-image">
            <img
              src="source/pic1.png"
              alt="Handmade Soap"
              class="product-image-img"
            />
            <div class="add-to-cart">Add to Cart</div>
          </div>

          <div class="product-info">
            <h3 class="product-title">Handmade Soap</h3>
            <p class="product-price">
              $260 <span class="product-old-price">$360</span>
            </p>
            <p class="product-rating">★★★★★ (65)</p>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image">
            <img
              src="source/pic1.png"
              alt="Handmade Soap"
              class="product-image-img"
            />
            <div class="add-to-cart">Add to Cart</div>
          </div>
          <div class="product-info">
            <h3 class="product-title">Handmade Soap</h3>
            <p class="product-price">
              $960 <span class="product-old-price">$1160</span>
            </p>
            <p class="product-rating">★★★★★ (65)</p>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image">
            <img
              src="source/pic1.png"
              alt="Handmade Soap"
              class="product-image-img"
            />
            <div class="add-to-cart">Add to Cart</div>
          </div>
          <div class="product-info">
            <h3 class="product-title">Handmade Soap</h3>
            <p class="product-price">
              $160 <span class="product-old-price">$170</span>
            </p>
            <p class="product-rating">★★★★☆ (65)</p>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image">
            <img
              src="source/pic1.png"
              alt="Handmade Soap"
              class="product-image-img"
            />
            <div class="add-to-cart">Add to Cart</div>
          </div>
          <div class="product-info">
            <h3 class="product-title">Handmade Soap</h3>
            <p class="product-price">$360</p>
            <p class="product-rating">★★★★★ (65)</p>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image">
            <img
              src="source/pic1.png"
              alt="Handmade Soap"
              class="product-image-img"
            />
            <div class="add-to-cart">Add to Cart</div>
          </div>
          <div class="product-info">
            <h3 class="product-title">Handmade Soap</h3>
            <p class="product-price">$360</p>
            <p class="product-rating">★★★★★ (65)</p>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image">
            <img
              src="source/pic1.png"
              alt="Handmade Soap"
              class="product-image-img"
            />
            <div class="add-to-cart">Add to Cart</div>
          </div>
          <div class="product-info">
            <h3 class="product-title">Handmade Soap</h3>
            <p class="product-price">$360</p>
            <p class="product-rating">★★★★★ (65)</p>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image">
            <img
              src="source/pic1.png"
              alt="Handmade Soap"
              class="product-image-img"
            />
            <div class="add-to-cart">Add to Cart</div>
          </div>
          <div class="product-info">
            <h3 class="product-title">Handmade Soap</h3>
            <p class="product-price">$360</p>
            <p class="product-rating">★★★★★ (65)</p>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image">
            <img
              src="source/pic1.png"
              alt="Handmade Soap"
              class="product-image-img"
            />
            <div class="add-to-cart">Add to Cart</div>
          </div>
          <div class="product-info">
            <h3 class="product-title">Handmade Soap</h3>
            <p class="product-price">$360</p>
            <p class="product-rating">★★★★★ (65)</p>
          </div>
        </div>
      </div>
      <!-- This div will be filled with products by JavaScript -->
      <div id="products-container" class="products">
        <!-- Loading indicator -->
        <div style="width: 100%; text-align: center; padding: 40px">
          <p>Loading your products...</p>
        </div>
      </div>
    </section>
    <footer>
      <div class="footer-content">
        <div class="exclusive">
          <h3>Exclusive</h3>
          <p>Subscribe</p>
          <p>Get 10% off your first order</p>
          <input type="email" placeholder="Enter your email" />
        </div>
        <div class="support">
          <h3>Support</h3>
          <p>111 Bijoy Sarani, Dhaka, DH 1515, Bangladesh.</p>
          <p>exclusive@gmail.com</p>
          <p>+88015-88888-9999</p>
        </div>
        <div class="account">
          <h3>Account</h3>
          <p>My Account</p>
          <p>Login / Register</p>
          <p>Cart</p>
          <p>Wishlist</p>
          <p>Shop</p>
        </div>
        <div class="quick-links">
          <h3>Quick Link</h3>
          <p>Privacy Policy</p>
          <p>Terms Of Use</p>
          <p>FAQ</p>
          <p>Contact</p>
        </div>
        <div class="download-app">
          <h3>Download App</h3>
          <p style="font-size: 12px">Save $3 with App New User Only</p>
          <div>
            <img src="Frame 719.png" alt="" />
          </div>
          <div>
            <img src="Frame 741.png" alt="" />
          </div>
        </div>
      </div>
      <p class="copyright">©️ Copyright Rimel 2022. All rights reserved</p>
    </footer>
  </body>
</html>
